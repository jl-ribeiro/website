<!DOCTYPE html><html lang="pt" class="scroll-smooth"> <head><meta charset="UTF-8"><meta name="description" content="Astro description"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.16.19"><title>Ingestão de Baixa Latência com Datastream</title><link rel="stylesheet" href="/_astro/_slug_.kCJFit7k.css">
<style>[data-lightbox-overlay]{z-index:10000}
</style><script type="module">document.addEventListener("DOMContentLoaded",()=>{const a=document.querySelectorAll("[data-lightbox-trigger]"),o=document.querySelectorAll("[data-lightbox-overlay]"),i=document.querySelectorAll("[data-lightbox-close]"),n=document.querySelectorAll("[data-lightbox-img]");a.forEach((t,e)=>{const c=o[e],s=n[e];t.addEventListener("click",()=>{c&&s&&(c.classList.add("opacity-100","pointer-events-auto"),s.src=t.src)})}),i.forEach(t=>{t.addEventListener("click",()=>{const e=t.closest("[data-lightbox-overlay]");e&&e.classList.remove("opacity-100","pointer-events-auto")})}),o.forEach(t=>{t.addEventListener("click",e=>{e.target===t&&t.classList.remove("opacity-100","pointer-events-auto")}),document.addEventListener("keydown",e=>{e.key==="Escape"&&t.classList.contains("opacity-100")&&t.classList.remove("opacity-100","pointer-events-auto")})})});
</script></head> <body class="bg-slate-900 text-slate-300"> <header class="fixed top-0 left-0 w-full z-50 bg-slate-900/80 backdrop-blur-sm"> <div class="max-w-5xl mx-auto px-4"> <div class="flex items-center justify-between h-16"> <a href="/pt/" class="text-white font-bold text-lg">Jair Ribeiro</a> <div class="flex items-center gap-8"> <nav class="hidden md:flex gap-6 text-sm"> <a href="/pt/#projetos" class="hover:text-emerald-400 transition-colors">Projetos</a> <a href="/pt/#sobre" class="hover:text-emerald-400 transition-colors">Sobre</a> <a href="#contato" class="hover:text-emerald-400 transition-colors">Contato</a> </nav> <div class="flex items-center gap-3 text-sm font-medium"> <a href="/pt/projetos/ingestao-cdc/" class="transition text-emerald-400 font-bold">
PT
</a> <div class="w-px h-4 bg-slate-600"></div> <a href="/en/projetos/ingestao-cdc/" class="transition text-slate-300 hover:text-emerald-400">
EN
</a> </div> </div> </div> </div> </header>  <main class="pt-24 pb-20"> <article class="max-w-4xl mx-auto px-4"> <header class="text-center mb-12"> <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">Ingestão de Baixa Latência com Datastream</h1> <p class="text-lg md:text-xl text-slate-300">Criação de um pipeline de replicação de dados near real-time com redução de 98% em custos.</p> </header> <div class="prose prose-invert prose-lg max-w-none mx-auto"> <section class="mt-12"> <h2>Contexto</h2> <blockquote class="border-l-4 border-emerald-500 bg-slate-800/50 p-4 rounded-r-lg not-prose"> <p class="text-slate-300">Desenvolvimento de uma arquitetura de ingestão de dados via Change Data Capture (CDC) para replicar dados de um banco transacional (MySQL) para um ambiente analítico (BigQuery) de forma confiável, rápida e econômica.</p> </blockquote> </section> <section class="mt-12"> <h2>Problema</h2> <p>A metodologia anterior gerava alto consumo de recursos do banco de dados transacional, além de custos elevados no processamento.</p><p>Havia perda de dados durante o processo, comprometendo a confiabilidade da informação.</p><p>O tempo de replicação era alto para tabelas volumosas, inviabilizando análises com dados recentes.</p> </section> <section class="mt-12"> <h2>Solução e Contribuição</h2> <ul class="list-none p-0 mb-8"> <li class="flex items-start mb-2"> <svg width="1em" height="1em" class="text-emerald-400 w-6 h-6 mr-3 flex-shrink-0 mt-1" data-icon="mdi:check-decagram">   <symbol id="ai:mdi:check-decagram" viewBox="0 0 24 24"><path fill="currentColor" d="m23 12l-2.44-2.78l.34-3.68l-3.61-.82l-1.89-3.18L12 3L8.6 1.54L6.71 4.72l-3.61.81l.34 3.68L1 12l2.44 2.78l-.34 3.69l3.61.82l1.89 3.18L12 21l3.4 1.46l1.89-3.18l3.61-.82l-.34-3.68zm-13 5l-4-4l1.41-1.41L10 14.17l6.59-6.59L18 9z"/></symbol><use href="#ai:mdi:check-decagram"></use>  </svg> <span>Projetei e implementei uma solução nativa na Google Cloud, utilizando Datastream, Cloud Storage, Composer (Airflow) e BigQuery.</span> </li><li class="flex items-start mb-2"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-emerald-400 w-6 h-6 mr-3 flex-shrink-0 mt-1" data-icon="mdi:check-decagram">   <use href="#ai:mdi:check-decagram"></use>  </svg> <span>Configurei a captura de logs binários via CDC, exportando os dados em formato Avro para o Cloud Storage.</span> </li><li class="flex items-start mb-2"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-emerald-400 w-6 h-6 mr-3 flex-shrink-0 mt-1" data-icon="mdi:check-decagram">   <use href="#ai:mdi:check-decagram"></use>  </svg> <span>Desenhei uma arquitetura em camadas — External Tables, Streaming Views e Raw Tables — garantindo acesso aos dados em tempo real e lotes otimizados para análises.</span> </li> </ul> <figure class="relative block"> <img src="/diagrama-datastream.png" alt="Diagrama de arquitetura do projeto Ingestão de Baixa Latência com Datastream" class="rounded-lg shadow-lg cursor-zoom-in transition-transform duration-200 hover:scale-[1.01]" data-lightbox-trigger> <figcaption class="text-center text-sm text-slate-400 mt-2">Diagrama de alto nível da arquitetura da solução do Ingestão de Baixa Latência com Datastream</figcaption> <div class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-[9999] opacity-0 pointer-events-none transition-opacity duration-300" data-lightbox-overlay> <div class="relative max-w-5xl max-h-[90vh] overflow-auto"> <img src="/diagrama-datastream.png" alt="Diagrama de arquitetura do projeto Ingestão de Baixa Latência com Datastream" class="max-w-full max-h-full rounded-lg shadow-xl" data-lightbox-img> <button class="absolute top-4 right-4 text-white text-4xl font-light leading-none" data-lightbox-close>&times;</button> <p class="text-white text-center text-lg mt-4">Diagrama de alto nível da arquitetura da solução do Ingestão de Baixa Latência com Datastream</p> </div> </div> </figure>   </section> <section class="mt-12"> <h2>Resultados e Impactos</h2> <ul class="list-none p-0"> <li class="flex items-start mb-2"> <svg width="1em" height="1em" class="text-amber-400 w-6 h-6 mr-3 flex-shrink-0 mt-1" data-icon="mdi:trophy-variant">   <symbol id="ai:mdi:trophy-variant" viewBox="0 0 24 24"><path fill="currentColor" d="M17 4V2H7v2H2v7c0 1.1.9 2 2 2h3.1a5.01 5.01 0 0 0 3.9 3.9v2.18C8 19.54 8 22 8 22h8s0-2.46-3-2.92V16.9a5.01 5.01 0 0 0 3.9-3.9H20c1.1 0 2-.9 2-2V4zM4 11V6h3v5zm16 0h-3V6h3z"/></symbol><use href="#ai:mdi:trophy-variant"></use>  </svg> <span>Redução de 98% nos custos de replicação de dados.</span> </li><li class="flex items-start mb-2"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-amber-400 w-6 h-6 mr-3 flex-shrink-0 mt-1" data-icon="mdi:trophy-variant">   <use href="#ai:mdi:trophy-variant"></use>  </svg> <span>Disponibilização dos dados para análise em minutos (near real-time), em vez de horas.</span> </li><li class="flex items-start mb-2"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-amber-400 w-6 h-6 mr-3 flex-shrink-0 mt-1" data-icon="mdi:trophy-variant">   <use href="#ai:mdi:trophy-variant"></use>  </svg> <span>Criação de uma arquitetura de ingestão modular, escalável e replicável para múltiplos clientes SaaS.</span> </li> </ul> </section> <section class="mt-12"> <h2>Tecnologias utilizadas</h2> <div class="flex flex-wrap gap-3">  </div> </section> <section class="mt-12"> <h2>Detalhes técnicos</h2> <div class="mb-8 border-l-2 border-slate-700 pl-4"> <h3 class="text-emerald-400 not-prose text-xl font-semibold">Arquitetura de Tabelas Externas e Views</h3> <p>O Datastream grava os arquivos Avro diretamente no Cloud Storage. O BigQuery referencia esses arquivos por meio de Tabelas Externas (de D-2 até o dia corrente), sobre as quais é construída uma View que captura os registros mais recentes. Essa abordagem permite consultar dados atualizados em até 2 minutos, sem custo de processamento até o momento da leitura real. Por fim, um merge select transfere os dados para Raw Tables particionadas e clusterizadas, otimizando custos e desempenho de consultas. Toda a orquestração do pipeline é realizada via DAG no Cloud Composer (Airflow).</p>   </div> </section> </div> <div class="text-center mt-16"> <a href="/pt/#projetos" class="text-emerald-400 hover:text-emerald-300 font-semibold">
&larr; Voltar para todos os projetos
</a> </div> </article> </main>  </body></html>